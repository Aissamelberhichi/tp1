{"ast":null,"code":"// src/components/tasks/TaskForm.js\nimport React,{useState}from'react';import{taskService}from'../../services/api';import'./Tasks.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TaskForm=_ref=>{let{onTaskAdded}=_ref;const[formData,setFormData]=useState({title:'',description:''});const[submitting,setSubmitting]=useState(false);const[error,setError]=useState('');const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(!formData.title.trim())return;setSubmitting(true);setError('');// Log pour débogage\nconsole.log('Données du formulaire:',formData);console.log('Token d\\'authentification:',localStorage.getItem('token'));try{const newTask=await taskService.createTask(formData);console.log('Tâche créée avec succès:',newTask);setFormData({title:'',description:''});if(onTaskAdded)onTaskAdded(newTask);}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Erreur lors de la création de la tâche:',error);console.error('Détails de l\\'erreur:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);setError(`Erreur lors de l'ajout de la tâche: ${((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message}`);}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"task-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ajouter une t\\xE2che\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"task-title\",children:\"Titre de la t\\xE2che\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"task-title\",className:\"form-control\",name:\"title\",value:formData.title,onChange:handleChange,placeholder:\"Entrez le titre de la t\\xE2che\",disabled:submitting,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"task-description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"task-description\",className:\"form-control\",name:\"description\",value:formData.description,onChange:handleChange,placeholder:\"Entrez une description d\\xE9taill\\xE9e (optionnelle)\",disabled:submitting,rows:\"4\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:submitting||!formData.title.trim(),children:submitting?'Ajout en cours...':'Ajouter la tâche'})})]})]});};export default TaskForm;","map":{"version":3,"names":["React","useState","taskService","jsx","_jsx","jsxs","_jsxs","TaskForm","_ref","onTaskAdded","formData","setFormData","title","description","submitting","setSubmitting","error","setError","handleChange","e","target","name","value","handleSubmit","preventDefault","trim","console","log","localStorage","getItem","newTask","createTask","_error$response","_error$response2","_error$response2$data","response","data","message","className","children","onSubmit","htmlFor","type","id","onChange","placeholder","disabled","required","rows"],"sources":["D:/EST/S6/dep/tp1/tp1/frontend/src/components/tasks/TaskForm.js"],"sourcesContent":["// src/components/tasks/TaskForm.js\nimport React, { useState } from 'react';\nimport { taskService } from '../../services/api';\nimport './Tasks.css';\n\nconst TaskForm = ({ onTaskAdded }) => {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: ''\n  });\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!formData.title.trim()) return;\n\n    setSubmitting(true);\n    setError('');\n    \n    // Log pour débogage\n    console.log('Données du formulaire:', formData);\n    console.log('Token d\\'authentification:', localStorage.getItem('token'));\n    \n    try {\n      const newTask = await taskService.createTask(formData);\n      console.log('Tâche créée avec succès:', newTask);\n      setFormData({ title: '', description: '' });\n      if (onTaskAdded) onTaskAdded(newTask);\n    } catch (error) {\n      console.error('Erreur lors de la création de la tâche:', error);\n      console.error('Détails de l\\'erreur:', error.response?.data);\n      setError(`Erreur lors de l'ajout de la tâche: ${error.response?.data?.message || error.message}`);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"task-form\">\n      <h2>Ajouter une tâche</h2>\n      \n      {error && <div className=\"alert alert-danger\">{error}</div>}\n      \n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"task-title\">Titre de la tâche</label>\n          <input\n            type=\"text\"\n            id=\"task-title\"\n            className=\"form-control\"\n            name=\"title\"\n            value={formData.title}\n            onChange={handleChange}\n            placeholder=\"Entrez le titre de la tâche\"\n            disabled={submitting}\n            required\n          />\n        </div>\n        \n        <div className=\"form-group\">\n          <label htmlFor=\"task-description\">Description</label>\n          <textarea\n            id=\"task-description\"\n            className=\"form-control\"\n            name=\"description\"\n            value={formData.description}\n            onChange={handleChange}\n            placeholder=\"Entrez une description détaillée (optionnelle)\"\n            disabled={submitting}\n            rows=\"4\"\n          />\n        </div>\n        \n        <div className=\"form-group text-center\">\n          <button \n            type=\"submit\" \n            className=\"btn btn-primary\" \n            disabled={submitting || !formData.title.trim()}\n          >\n            {submitting ? 'Ajout en cours...' : 'Ajouter la tâche'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default TaskForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}